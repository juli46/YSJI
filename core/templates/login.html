{% load static %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- FontAwesome -->
    <script src="https://kit.fontawesome.com/64d58efce2.js" crossorigin="anonymous"></script>
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/css.css' %}" />
    <!-- SweetAlert -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.7.32/sweetalert2.min.css"/>
    <title>Iniciar Sesión</title>
     <link rel="shortcut icon" href="{% static 'images/icon.png' %}">
  </head>
  <body>

    <!-- SweetAlert con Django messages -->
    {% if messages %}
      {% for message in messages %}
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          let icon =
            "{{ message.tags }}" === "success" ? "success" :
            "{{ message.tags }}" === "error"   ? "error"   :
            "{{ message.tags }}" === "warning" ? "warning" : "info";

          Swal.fire({
            icon: icon,
            title:
              icon === "success" ? "¡Éxito!" :
              icon === "error"   ? "¡Error!" :
              icon === "warning" ? "¡Advertencia!" : "Información",
            text: "{{ message|escapejs }}",
            confirmButtonText: "Aceptar",
          }).then(() => {
            if (icon === "success" && "{{ message|escapejs }}".includes("cuenta ha sido creada")) {
              document.querySelector(".container").classList.remove("sign-up-mode");
            }
          });
        });
      </script>
      {% endfor %}
    {% endif %}

    <div class="container {% if form.errors %}sign-up-mode{% endif %}">
      <div class="forms-container">
        <div class="signin-signup">
          
          <!-- LOGIN -->
          <form method="POST" id="loginForm" class="sign-in-form" novalidate>
            {% csrf_token %}
            <h2 class="title">Iniciar sesión</h2>
            <div class="input-field">
              <i class="fas fa-envelope"></i>
              <input type="email" name="correo" placeholder="Correo Electrónico" required/>
            </div>
            <div class="input-field">
              <i class="fas fa-lock"></i>
              <input type="password" name="contraseña" placeholder="Contraseña" required/>
            </div>
            <button type="submit" name="login" class="btn solid">Entrar</button>
            <a href="{% url 'index' %}" class="btn btn-back">Regresar</a>
            <p class="social-text">O inicia sesión con redes</p>
            <div class="social-media">
              <a href="#" class="social-icon"><i class="bi bi-facebook"></i></a>
              <a href="#" class="social-icon"><i class="bi bi-twitter"></i></a>
              <a href="#" class="social-icon"><i class="bi bi-google"></i></a>
              <a href="#" class="social-icon"><i class="bi bi-linkedin"></i></a>
            </div>
          </form>

          <!-- REGISTRO -->
          <form method="POST" id="registerForm" class="sign-up-form" novalidate>
            {% csrf_token %}
            <h2 class="title">Regístrate</h2>
            <div class="input-field">
              <i class="fas fa-user"></i>
              <input type="text" name="nombre" id="nombre" placeholder="Nombre" required/>
              <div class="error-message" id="nombre-error"></div>
            </div>
            <div class="input-field">
              <i class="fas fa-envelope"></i>
              <input type="email" name="correo" id="correo" placeholder="Correo Electrónico" required/>
              <div class="error-message" id="correo-error"></div>
            </div>
            <div class="input-field">
              <i class="fas fa-lock"></i>
              <input type="password" name="contraseña" id="contraseña" placeholder="Contraseña" required/>
              <div class="error-message" id="contraseña-error"></div>
            </div>
            <div class="input-field">
              <i class="fas fa-lock"></i>
              <input type="password" name="confirmar_contraseña" id="confirmar_contraseña" placeholder="Confirmar Contraseña" required/>
              <div class="error-message" id="confirmar_contraseña-error"></div>
            </div>

            <!-- Mostrar contraseña -->
            <div class="show-password-container password-toggle">
              <input type="checkbox" id="mostrarContraseña" onclick="mostrarContraseñas()"/>
              <label for="mostrarContraseña">Mostrar Contraseña</label>
            </div>

            <button type="submit" name="register" class="btn">Crear Cuenta</button>
            <p class="social-text">O regístrate con redes</p>
            <div class="social-media">
              <a href="#" class="social-icon"><i class="bi bi-facebook"></i></a>
              <a href="#" class="social-icon"><i class="bi bi-twitter"></i></a>
              <a href="#" class="social-icon"><i class="bi bi-google"></i></a>
              <a href="#" class="social-icon"><i class="bi bi-linkedin"></i></a>
            </div>
          </form>
        </div>
      </div>

      <div class="panels-container">
        <div class="panel left-panel">
          <div class="content">
            <h3>¿Nuevo aquí?</h3>
            <p>Regístrate y accede a todas las funciones de nuestra plataforma.</p>
            <button class="btn transparent" id="sign-up-btn">Regístrate</button>
          </div>
          <img src="{% static 'images/www.jpg' %}" class="image" alt="" />
        </div>
        <div class="panel right-panel">
          <div class="content">
            <h3>¿Ya tienes cuenta?</h3>
            <p>Inicia sesión y continúa disfrutando de nuestros servicios.</p>
            <button class="btn transparent" id="sign-in-btn">Inicia sesión</button>
          </div>
          <img src="{% static 'images/pr2.svg' %}" class="image" alt="" />
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.7.32/sweetalert2.min.js"></script>
    <script src="{% static 'js/js.js' %}"></script>

    <script>
      // Mostrar/ocultar contraseñas
      function mostrarContraseñas() {
        const pass = document.getElementById("contraseña");
        const confirm = document.getElementById("confirmar_contraseña");
        const check = document.getElementById("mostrarContraseña");
        pass.type = check.checked ? "text" : "password";
        confirm.type = check.checked ? "text" : "password";
      }
    </script>
  </body>
</html>
